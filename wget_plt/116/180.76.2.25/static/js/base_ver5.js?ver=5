 (function($){$.cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||value===null||value===undefined)){options=$.extend({},options);if(value===null||value===undefined){options.expires=-1}if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days)}value=String(value);return(document.cookie=[encodeURIComponent(key),'=',options.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''))}options=value||{};var decode=options.raw?function(s){return s}:decodeURIComponent;var pairs=document.cookie.split('; ');for(var i=0,pair;pair=pairs[i]&&pairs[i].split('=');i++){if(decode(pair[0])===key)return decode(pair[1]||'')}return null}})(jQuery);
 
(function($){var W=window,D=document;$.fn.backToTop=function(options){return this.each(function(){new $.BackToTop($(this),options)})};$.BackToTop=function(obj,options){var defaults={showLength:600};this.opts=$.extend(defaults,options);this.obj=obj;this._init()};$.BackToTop.prototype={_init:function(){var self=this,$W=$(W);$W.scroll(function(){if($W.scrollTop()>=self.opts.showLength&&self.obj.css('display')=='none'){self.obj.fadeIn()}else if($W.scrollTop()<self.opts.showLength&&self.obj.css('display')=='block'){self.obj.fadeOut()}});this.obj.click(function(){$('html,body').animate({'scrollTop':0});return false})}}})(jQuery);
 
(function($){$.fn.lavaLamp=function(o){o=$.extend({fx:"linear",speed:500,click:function(){}},o||{});return this.each(function(){var b=$(this),noop=function(){},$back=$('<li class="back"><div class="left"></div></li>').appendTo(b),$li=$("li.j-move",this),curr=$("li.current",this)[0]||$($li[0]).addClass("current")[0];$li.not(".back").hover(function(){move(this)},noop);$(this).hover(noop,function(){move(curr)});$li.click(function(e){setCurr(this);return o.click.apply(this,[e,this])});setCurr(curr);function setCurr(a){$back.css({"left":a.offsetLeft+"px","width":a.offsetWidth+"px"});curr=a};function move(a){$back.each(function(){$.dequeue(this,"fx")}).animate({width:a.offsetWidth,left:a.offsetLeft},o.speed,o.fx)}})}})(jQuery);
 
function isInVision(e,inFunc,upFunc,downFunc){if(!e.size()){return false}var top=e.get(0).getBoundingClientRect().top,bottom=e.get(0).getBoundingClientRect().bottom;var se=document.documentElement.clientHeight;if(top<=se){if(bottom>=0){inFunc&&inFunc(top,bottom);return 1}else{downFunc&&downFunc();return -1}}else{if(!upFunc){}else{upFunc&&upFunc()}return false}};

var urlParams={};(function(){var e,a=/\+/g,r=/([^&=]+)=?([^&]*)/g,d=function(s){return decodeURIComponent(s.replace(a," "))},q=window.location.search.substring(1);while(e=r.exec(q)){urlParams[d(e[1])]=d(e[2])}})();

var _refer_={};(function(url){if(!url){_refer_=null;return}var keys=["url","scheme","slash","host","port","path","query","hash"];var regGroups=/^(?:([A-Za-z]+):)?(\/{0,3})([-\w\.]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:\#(.*))?$/.exec(url);for(var i=0;i<regGroups.length;i++){_refer_[keys[i]]=regGroups[i]}if(_refer_.query){var e,a=/\+/g,r=/([^&=]+)=?([^&]*)/g,d=function(s){return decodeURIComponent(s.replace(a," "))},q=_refer_.query;_refer_.query={};while(e=r.exec(q)){_refer_.query[d(e[1])]=d(e[2])}}})(document.referrer);

$(function(){
    var ptn = $.cookie('ptn');
    if(!ptn){
        $.cookie('ptn','organic',{expires:30,path:'/'});
        ptn = $.cookie('ptn');
    }

    var ga_click_event = function(){
        //var uri = $(this).attr('href').replace(/^http:\/\/[^\/]+\//,''); 
        window.ga && ga('send', 'event', 'download', 'installer_download', ptn +'_homepage_'+ lang );
        var ActivityID = '261628';
       
        var mediaMindScript = $('<img />');
        mediaMindScript.attr({'width':'1','height':'1','src':'HTTP://bs.serving-sys.com/BurstingPipe/ActivityServer.bs?cn=as&ActivityID='+ActivityID+'&ns=1'}).css('border','0').appendTo($('body'));
    }
    //ga
    $('#home_dlBtn').on('click',ga_click_event);
    $('.j_statistics_download').click(function(){
        var statisticsFlag = ptn +'_'+ $(this).attr('data-flag') +'_'+ lang;
        window.ga && ga('send', 'event', 'download', 'installer_download', statisticsFlag );
    });
    $('.j_statistics_click').click(function(){
        var statisticsFlag = ptn +'_'+ $(this).attr('data-flag') +'_'+ lang;
        window.ga && ga('send', 'event', 'click', 'home_click', statisticsFlag );
    });
}); 

$(document).ready(function() { 
    $(function() {
        $("#J_navList").lavaLamp({
            fx: "linear", 
            speed: 300
        }); 
    })
});