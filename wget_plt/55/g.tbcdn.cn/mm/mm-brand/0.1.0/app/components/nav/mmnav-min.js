!function(e){var n={getFullUrl:function(e){return n.isDAily()?"http://www.alimama.net"+e:"http://www.alimama.com"+e},time:function(o){n.isDAily()&&e.console&&e.console.time&&e.console.time(o)},timeEnd:function(o){n.isDAily()&&e.console&&e.console.timeEnd&&e.console.timeEnd(o)},isDAily:function(){return/(net|daily)/.test(location.href)},one:function(e){return document.getElementById(e)},jsonp:function(o,i){n.time("jsonp_time");var t="jsoncallback"+ +new Date,a=function(e){var n=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.src=e,n.appendChild(o)};e[t]=function(o){n.timeEnd("jsonp_time"),i&&i(o);try{delete e[t]}catch(a){e[t]=void 0}},o=o+"?callback="+t,a(o)},getCookie:function(e){if(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)){var n=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),o=n.exec(document.cookie);if(o)return o[2]||null}return null},fromUnicode:function(e){return e.replace(/\\u([a-f\d]{4})/gi,function(e,n){return String.fromCharCode(parseInt(n,16))})},removeClass:function(e,n){var o=" "+e.className+" ";o=o.replace(/(\s+)/gi," "),removed=o.replace(" "+n+" "," "),removed=removed.replace(/(^\s+)|(\s+$)/g,""),e.className=removed},checkIsLogined:function(){return!/alimama\.(net|com)/.test(location.href)||n.getCookie("cookie32")||n.getCookie("login")?/taobao\.(net|com)/.test(location.href)&&!n.getCookie("_nk_")?!1:!0:!1},fire:function(n){e.MM_HEAD&&e.MM_HEAD[n]&&"function"==typeof e.MM_HEAD[n]&&e.MM_HEAD[n]()}};n.time("showtime");var o='<iframe name="mmLoginIfr" id="J_mmLoginIfr" width="100%" height="202" frameborder="0" scrolling="no" src="http://www.alimama.net/member/minilogin.htm?custom_style=alimama" marginheight="0" marginwidth="0" border="0"></iframe>',i='<iframe name="taobaoLoginIfr" width="100%" height="202" frameborder="0" scrolling="no" src="https://login.daily.taobao.net/member/login.jhtml?style=minisimple&from=alimama&redirectURL=http%3A%2F%2Flogin.daily.taobao.net%2Fmember%2Ftaobaoke%2Flogin.htm%3Fis_login%3d1&full_redirect=true&disableQuickLogin=true" marginheight="0" marginwidth="0" border="0"></iframe>',t='<iframe name="mmLoginIfr" id="J_mmLoginIfr" width="100%" height="202" frameborder="0" scrolling="no" src="http://www.alimama.com/member/minilogin.htm?custom_style=alimama" marginheight="0" marginwidth="0" border="0"></iframe>',a='<iframe name="taobaoLoginIfr" width="100%" height="202" frameborder="0" scrolling="no" src="https://login.taobao.com/member/login.jhtml?style=minisimple&from=alimama&redirectURL=http%3A%2F%2Flogin.taobao.com%2Fmember%2Ftaobaoke%2Flogin.htm%3Fis_login%3d1&full_redirect=true&disableQuickLogin=true" marginheight="0" marginwidth="0" border="0"></iframe>',l={9:{id:"1",unicode:"xe601",link:"http://ad.alimama.com/myunion.htm",name:"\u6dd8\u5b9d\u5ba2\u63a8\u5e7f|\u6dd8\u5b9d\u5ba2\uff08\u5546\u5bb6\uff09"},27:{id:"2",unicode:"xe610",link:"http://ssp.tanx.com/ssp.html",name:"Tanx SSP"},28:{id:"3",unicode:"xe609",link:"http://mu.tanx.com/myunion/profile.htm",name:"Tanx \u79fb\u52a8|\u65e0\u7ebfSSP"},1:{id:"4",unicode:"xe605",link:"http://subway.simba.taobao.com/",name:"\u6dd8\u5b9d\u76f4\u901a\u8f66"},2:{id:"5",unicode:"xe607",link:"http://zuanshi.taobao.com/indexbp.html",name:"\u94bb\u77f3\u5c55\u4f4d"},26:{id:"6",unicode:"xe60e",link:"http://pub.alimama.com/myunion.htm",name:"\u6dd8\u5b9d\u8054\u76df|\u6dd8\u5b9d\u5ba2\u5a92\u4f53"},7:{id:"8",unicode:"xe611",link:"http://dmp.taobao.com/index.html",name:"DMP"},6:{id:"9",unicode:"xe603",link:"http://adx.tanx.com/dsp.html",name:"Tanx ADX"},10:{id:"12",unicode:"xe612",link:"http://majibao.alimama.com/myunion.htm",name:"\u9ebb\u5409\u5b9d"}};!function(){var e=function(){var e=n.one("J_site_nav_bd");/www\.alimama\.(net|com)/.test(location.href)&&(n.one("J_mama_menu").style.display="none"),n.removeClass(e,"hidden-v"),n.timeEnd("showtime")};n.checkIsLogined()?n.jsonp(n.getFullUrl("/getLogInfo.htm"),function(o){o.success&&(n.one("J_menu_product").style.display="block",n.one("J_menu_login_out").style.display="block",n.one("J_menu_username_span").innerHTML="\u4f60\u597d\uff0c"+n.fromUnicode(o.result.nickName),n.one("J_menu_login").style.display="none",n.one("J_menu_register").style.display="none"),e()}):e()}(),n.time("usetime"),KISSY.use("node,ajax,event,cookie",function(r){n.timeEnd("usetime");var s=r.all;n.fire("afterMainNavRender"),r.one("#J_site_nav_bd").addClass("mm-head-main-loaded");var c={hasRenderMmLogin:!1,hasRenderTaobaoLogin:!1,hasShowLoginPanel:!1,selectedPanelNode:null,selectedPanelContainer:null,loginPanel:null,selectedList:[],init:function(){this.selectedPanelNode=r.one("#J_products_selected_pannel"),this.selectedPanelContainer=r.one(".panel-product-container"),this.loginPanel=r.one("#J_login_panel_wrap"),this.hook(),this.bind()},hook:function(){this.changeDailyUrl()},changeDailyUrl:function(){n.isDAily()&&r.one(".quick-menu").all(".menu-hd").all("a").slice(0,3).each(function(e){var n=e.attr("href");e.attr("href",n.replace(/\.com/,".net"))})},showLoginPanel:function(n){var o=this;o.hasShowLoginPanel||(o.hasShowLoginPanel=!0,o.loginPanel.css("display","block").stop().animate({top:"-1"},.5,"easeOutStrong",function(){n&&r.one(e).scrollTop(0),o.setForward()}))},hideLoginPanel:function(){var e=this;e.hasShowLoginPanel&&(e.hasShowLoginPanel=!1,e.loginPanel.stop().animate({top:"-300"},.5,"easeInStrong",function(){e.loginPanel.css("display","none")}))},bind:function(){var e=this;s(".menu").on("mouseenter",function(){s(this).addClass("menu-hover")}),s(".menu").on("mouseleave",function(){s(this).removeClass("menu-hover")}),r.one(document).on("click",function(){e.hideLoginPanel()}),e.loginPanel.on("click",function(e){e.halt()}),r.one(".site-nav-bd-left").delegate("click","#J_menu_login",function(n){e.showLoginPanel(),n.halt()}),r.one(".site-nav-bd-left").delegate("click","#J_login_out",function(){location.href=n.getFullUrl("/member/logout.htm")+"?forward="+encodeURIComponent(location.href)}),r.one(".site-nav-bd-left").delegate("mouseenter",".menu-username",function(){e.initProducts()}),r.one(".login-panel-btn-left").on("click",function(){r.one(this).addClass("current").siblings("span").removeClass("current"),e.loginPanel.one(".login-panel-content-taobao").css("display","block"),e.loginPanel.one(".login-panel-content-alimama").css("display","none"),e.renderTaobaologin()}),r.one(".login-panel-btn-right").on("click",function(){r.one(this).addClass("current").siblings("span").removeClass("current"),e.loginPanel.one(".login-panel-content-taobao").css("display","none"),e.loginPanel.one(".login-panel-content-alimama").css("display","block"),e.renderMMlogin()})},initProducts:function(){var e=this;if(this.selectedPanelContainer.hasClass("panel-product-container-loaded"))return!1;n.fire("beforeProductListRender");var o=function(n){e.selectedList=[],r.each(n,function(n){l[n]&&e.selectedList.push({id:l[n].id,link:l[n].link,unicode:l[n].unicode})}),e.renderSelectedProducts()};r.io({url:n.getFullUrl("/getTagInfo.htm"),type:"get",dataType:"jsonp",success:function(e){if(e.success){var n=r.unique(e.result.tagIDList);o(n)}else o([])}})},setForward:function(){var e=this;r.io({url:n.getFullUrl("/member/ajax_login.htm"),type:"get",dataType:"jsonp",data:{forward:location.href},success:function(){e.renderTaobaologin()},error:function(){e.renderTaobaologin()}})},renderMMlogin:function(){if(!this.hasRenderMmLogin){var e=n.isDAily()?o:t;r.one("#J_login_panel_alimama").html(e),this.hasRenderMmLogin=!0}},renderTaobaologin:function(){if(!this.hasRenderTaobaoLogin){var e=n.isDAily()?i:a;r.one("#J_login_panel_taobao").html(e),this.hasRenderTaobaoLogin=!0}},templete:function(e){var n="";return 1==e.id&&(n='<span class="nav-logo-extend">\uff08\u5356\u5bb6\uff09</span>'),6==e.id&&(n='<span class="nav-logo-extend">\uff08\u7ad9\u957f\uff09</span>'),"<li data-product-id="+e.id+' class="product-block product-block-'+e.id+'"><a data-spm="d00'+e.id+'" target="_blank" href="'+e.link+'"><span class="nav-product-logo"></span><i class="top-nav-iconfont">&#'+e.unicode+";</i>"+n+"</a></li>"},getGuideHtml:function(){return'<p class="empty-info"><em>&#58893</em>\u5feb\u6765\u4f53\u9a8c\u6211\u4eec\u7684\u4ea7\u54c1\u5427\uff01<br>\u4f7f\u7528\u8fc7\u7684\u4ea7\u54c1\u4f1a\u5728\u8fd9\u91cc\u5c55\u793a\u3002</p>'},renderSelectedProducts:function(){var e=this,o=0,i=r.clone(e.selectedList),t=i.length,a="";if(0==t)a=e.getGuideHtml();else{for(a='<ul class="panel-product-list clearfix">',o;t>o;o++)a+=e.templete(i[o]);a+="</ul>"}e.selectedPanelContainer.addClass("panel-product-container-loaded").html(a),n.fire("afterProductListRender")}};e.MM_HEAD=e.MM_HEAD||{},r.mix(e.MM_HEAD,c),e.MM_HEAD.init()})}(window);